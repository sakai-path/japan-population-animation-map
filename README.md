# 日本出入国者数マップ

e-Stat（政府統計の総合窓口）のデータを使用した、都道府県別出入国者数のインタラクティブ可視化アプリです。

## データについて

- **データソース**: e-Stat API（統計表ID: 0003448239）
- **統計名**: 令和2年国勢調査 都道府県別出入国者数
- **対象期間**: 2020年10月～2021年9月
- **データ項目**: 
  - 入国者数 / 出国者数
  - 男女別（男女計・男性・女性）
  - 日本人 / 外国人
  - 全47都道府県

## 主要機能

### 1. 単一地図表示
- **都道府県フィルタ**: 特定の都道府県のみ表示可能
- **多次元フィルタ**: 入国/出国 × 男女別 × 日本人/外国人の組み合わせ
- **自動ズーム**: 都道府県選択時に地図が自動でズーム
- **ランキング表示**: 上位10都道府県のランキングとグラフ
- **統計情報**: 総人数、最多都道府県、平均値の表示

### 2. 左右比較表示
- **並列比較**: 2つの条件を左右に並べて比較
- **スケール統一**: 色とサイズのスケールを統一して正確な比較
- **比較パターン**: 日本人 vs 外国人、入国 vs 出国、男性 vs 女性
- **上位5表示**: 各条件の上位5都道府県を表示

### 3. 数値比較表
- **全パターン一覧**: 8つの主要パターンの数値を一覧表示
- **詳細統計**: 総人数、最多・最少都道府県、平均値
- **比較グラフ**: パターン別総人数の棒グラフ

### 4. その他の機能
- **アニメーション表示**: 条件を切り替えながらの動的表示

## 技術スタック

- **フロントエンド**: Streamlit
- **データ可視化**: Plotly Express
- **地図表示**: Plotly Mapbox（OpenStreetMap）
- **データ処理**: Pandas
- **API通信**: Requests
- **デプロイ**: Streamlit Cloud

## セットアップ

### 1. e-Stat APIキーの取得
1. [e-Stat](https://www.e-stat.go.jp/)でユーザー登録
2. アプリケーションIDを申請・取得

### 2. ローカル実行
```bash
# 依存関係をインストール
pip install streamlit plotly pandas requests

# APIキーを設定
mkdir .streamlit
echo '[e_stat]' > .streamlit/secrets.toml
echo 'app_id = "your_api_key_here"' >> .streamlit/secrets.toml

# アプリを起動
streamlit run app.py
